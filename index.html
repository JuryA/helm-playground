<script src="dist/wasm_exec.js"></script>
<script>
  async function main() {
    const templateYaml = '---\nname: {{ .Values.example }}';
    const valuesYaml = '---\nexample: hello!';

    const go = new Go();
    const response = await fetch('dist/lib.wasm');
    const buffer = await response.arrayBuffer();
    const result = await WebAssembly.instantiate(buffer, go.importObject);
    go.run(result.instance);

    const getYaml = (templateYaml, valuesYaml) => {
      let returnValueJson;
      try {
        returnValueJson = GetYaml(templateYaml, valuesYaml);
        const returnValue = JSON.parse(returnValueJson);
        return returnValue;
      } catch (error) {
        throw new Error(`unable to parse returnValueJson: ${returnValueJson}`);
      }
    };

    const asd = getYaml(templateYaml, valuesYaml);
    console.log(asd);
  }

  main().catch((error) => {
    console.error(error);
  });
</script>
